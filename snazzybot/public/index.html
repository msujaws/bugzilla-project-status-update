<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>SnazzyBot ‚Äî Bugzilla Auto-Summarization</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/logo.png" sizes="any" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      style="position: absolute; width: 0; height: 0; overflow: hidden"
      aria-hidden="true"
      focusable="false"
    >
      <symbol id="icon-copy" viewBox="0 0 24 24">
        <g
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.8"
        >
          <rect x="9" y="9" width="11" height="11" rx="2" ry="2"></rect>
          <path
            d="M6 15H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1"
          ></path>
        </g>
      </symbol>
      <symbol id="icon-download" viewBox="0 0 24 24">
        <g
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.8"
        >
          <path d="M12 4v9"></path>
          <path d="M8 11l4 4 4-4"></path>
          <path d="M4 20h16"></path>
        </g>
      </symbol>
      <symbol id="icon-github" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.745.083-.73.083-.73 1.205.085 1.84 1.237 1.84 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.776.42-1.305.763-1.605-2.665-.303-5.466-1.332-5.466-5.932 0-1.31.468-2.382 1.235-3.222-.123-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23a11.52 11.52 0 0 1 3.003-.404c1.02.005 2.047.138 3.003.404 2.29-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.873.119 3.176.77.84 1.233 1.913 1.233 3.222 0 4.61-2.805 5.625-5.476 5.921.431.372.815 1.102.815 2.222 0 1.604-.014 2.896-.014 3.286 0 .322.216.695.825.576C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
        ></path>
      </symbol>
    </svg>
    <div class="wrap">
      <header>
        <img src="/logo.png" alt="SnazzyBot logo" />
        <div>
          <h1>SnazzyBot <span class="badge">AUTO-SUMMARIZATION</span></h1>
          <p>
            Weekly, user-impact‚Äìfocused status updates from Bugzilla. Just pick
            your sources and SnazzyBot does the rest.
          </p>
        </div>
      </header>

      <div class="grid">
        <!-- Left: Inputs -->
        <section class="card">
          <p class="kicker">Filters</p>

          <div class="row-2">
            <div>
              <label for="components"
                >Components
                <span class="hint"
                  >one per line: <code>Product:Component</code></span
                ></label
              >
              <textarea
                id="components"
                rows="6"
                placeholder="Firefox:General&#10;Fenix:Toolbar"
              ></textarea>
            </div>
            <div>
              <label for="whiteboards"
                >Whiteboard tags <span class="hint">one per line</span></label
              >
              <textarea
                id="whiteboards"
                rows="6"
                placeholder="[fx-vpn]&#10;[fidefe-sidebar]"
              ></textarea>
            </div>
          </div>

          <div style="margin-top: 14px">
            <label for="metabugs"
              >Metabug IDs
              <span class="hint">comma or newline separated</span></label
            >
            <textarea
              id="metabugs"
              rows="3"
              placeholder="1882882, 1993031"
            ></textarea>
          </div>

          <div style="margin-top: 14px">
            <label for="assignees"
              >Assignee emails <span class="hint">one per line</span></label
            >
            <textarea
              id="assignees"
              rows="3"
              placeholder="dev@example.com&#10;peer@example.com"
            ></textarea>
          </div>

          <div class="row" style="margin-top: 14px">
            <div>
              <label for="days">Days lookback</label>
              <input id="days" type="number" min="1" value="7" />
            </div>
            <div>
              <label for="voice">Voice</label>
              <select id="voice">
                <option value="normal" selected>Normal</option>
                <option value="pirate">Pirate üè¥‚Äç‚ò†Ô∏è</option>
                <option value="snazzy-robot">Snazzy Robot ü§ñ</option>
              </select>
            </div>
            <div>
              <label for="audience">Audience</label>
              <select id="audience">
                <option value="technical" selected>Technical</option>
                <option value="product">Product</option>
                <option value="leadership">Leadership</option>
              </select>
            </div>
            <div>
              <label for="debug">Debug</label>
              <select id="debug">
                <option value="false">No</option>
                <option value="true">Yes</option>
              </select>
            </div>
            <div>
              <label for="cache">Cache (TTL 1d)</label>
              <select id="cache">
                <option value="true" selected>Yes</option>
                <option value="false">No</option>
              </select>
            </div>
            <div>
              <label for="patch-context">Patch Context</label>
              <select id="patch-context">
                <option value="omit" selected>Skip</option>
                <option value="include">Include</option>
              </select>
            </div>
          </div>

          <div class="actions">
            <button id="run">Run SnazzyBot</button>
          </div>

          <div class="status">
            <div class="dot" aria-hidden="true"></div>
            <div id="spin" class="pill" style="display: none">‚è≥ Working‚Ä¶</div>
            <div id="quick-status" class="pill" style="display: none"></div>
          </div>

          <div id="phases"></div>

          <details id="logwrap">
            <summary>Run log</summary>
            <div id="log" class="log" role="log" aria-live="polite"></div>
          </details>
        </section>

        <!-- Right: Result -->
        <section class="card">
          <p class="kicker">Result</p>
          <div class="actions">
            <button
              id="copy"
              class="secondary icon-btn"
              aria-label="Copy .md"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-copy"></use>
              </svg>
              <span aria-hidden="true">.md</span>
            </button>
            <button
              id="dl-md"
              class="secondary icon-btn"
              aria-label="Download .md"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-download"></use>
              </svg>
              <span aria-hidden="true">.md</span>
            </button>
            <button
              id="copy-rendered"
              class="secondary icon-btn"
              aria-label="Copy rendered result"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-copy"></use>
              </svg>
              <span aria-hidden="true">Rendered</span>
            </button>
            <button
              id="dl-html"
              class="secondary icon-btn"
              aria-label="Download .html"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-download"></use>
              </svg>
              <span aria-hidden="true">.html</span>
            </button>
          </div>
          <!-- keep a hidden textual backup for accessibility / copy as markdown -->
          <div
            id="out"
            class="out"
            aria-live="polite"
            style="display: none"
          ></div>

          <!-- rendered output -->
          <iframe
            id="resultFrame"
            title="SnazzyBot result"
            style="
              width: 100%;
              height: 320px;
              border: 1px solid rgba(255, 255, 255, 0.12);
              border-radius: 12px;
              background: #0f1633;
            "
          ></iframe>
        </section>
      </div>

      <p class="footer">
        <span class="footer-source">
          <a
            class="source-link"
            href="https://github.com/msujaws/bugzilla-project-status-update"
          >
            <svg aria-hidden="true" focusable="false">
              <use href="#icon-github"></use>
            </svg>
            <span>source</span>
          </a>
        </span>
        ‚ú® created by Jared Wein / :jaws ‚Äî logo contributed by :jhirsch - name
        contributed by :sclements
      </p>
    </div>
    <canvas id="fx-layer" aria-hidden="true"></canvas>
    <script type="module" src="/app.js"></script>
  </body>
</html>
