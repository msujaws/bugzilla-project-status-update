<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>SnazzyBot ‚Äî Bugzilla Status Updates</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" href="/logo.png" sizes="any" />
    <link rel="stylesheet" href="/styles.css" />
  </head>
  <body>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      style="position: absolute; width: 0; height: 0; overflow: hidden"
      aria-hidden="true"
      focusable="false"
    >
      <symbol id="icon-copy" viewBox="0 0 24 24">
        <g
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.8"
        >
          <rect x="9" y="9" width="11" height="11" rx="2" ry="2"></rect>
          <path
            d="M6 15H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v1"
          ></path>
        </g>
      </symbol>
      <symbol id="icon-download" viewBox="0 0 24 24">
        <g
          fill="none"
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="1.8"
        >
          <path d="M12 4v9"></path>
          <path d="M8 11l4 4 4-4"></path>
          <path d="M4 20h16"></path>
        </g>
      </symbol>
      <symbol id="icon-github" viewBox="0 0 24 24">
        <path
          fill="currentColor"
          d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61-.546-1.387-1.333-1.757-1.333-1.757-1.09-.745.083-.73.083-.73 1.205.085 1.84 1.237 1.84 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.776.42-1.305.763-1.605-2.665-.303-5.466-1.332-5.466-5.932 0-1.31.468-2.382 1.235-3.222-.123-.303-.535-1.523.117-3.176 0 0 1.008-.322 3.3 1.23a11.52 11.52 0 0 1 3.003-.404c1.02.005 2.047.138 3.003.404 2.29-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.873.119 3.176.77.84 1.233 1.913 1.233 3.222 0 4.61-2.805 5.625-5.476 5.921.431.372.815 1.102.815 2.222 0 1.604-.014 2.896-.014 3.286 0 .322.216.695.825.576C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"
        ></path>
      </symbol>
      <symbol id="icon-edit" viewBox="0 0 512 512">
        <path
          fill="currentColor"
          d="M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L487.4 124l-97.9-97.9L172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"
        ></path>
      </symbol>
      <symbol id="icon-link" viewBox="0 0 640 512">
        <path
          fill="currentColor"
          d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"
        ></path>
      </symbol>
      <symbol id="icon-trash" viewBox="0 0 448 512">
        <path
          fill="currentColor"
          d="M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"
        ></path>
      </symbol>
      <symbol id="icon-external-link" viewBox="0 0 512 512">
        <path
          fill="currentColor"
          d="M320 0c-17.7 0-32 14.3-32 32s14.3 32 32 32h82.7L201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L448 109.3V192c0 17.7 14.3 32 32 32s32-14.3 32-32V32c0-17.7-14.3-32-32-32H320zM80 32C35.8 32 0 67.8 0 112V432c0 44.2 35.8 80 80 80H400c44.2 0 80-35.8 80-80V320c0-17.7-14.3-32-32-32s-32 14.3-32 32V432c0 8.8-7.2 16-16 16H80c-8.8 0-16-7.2-16-16V112c0-8.8 7.2-16 16-16H192c17.7 0 32-14.3 32-32s-14.3-32-32-32H80z"
        ></path>
      </symbol>
    </svg>
    <div class="wrap">
      <header>
        <img src="/logo.png" alt="SnazzyBot logo" />
        <div>
          <h1>SnazzyBot <span class="badge">BUGZILLA STATUS UPDATES</span></h1>
          <p>
            User-impact‚Äìfocused status updates from Bugzilla. Just pick your
            sources and SnazzyBot does the rest.
          </p>
        </div>
      </header>

      <div id="saved-searches-container" class="saved-searches-section"></div>

      <div class="grid">
        <!-- Left: Inputs -->
        <section class="card">
          <p class="kicker">Filters</p>

          <div class="filters-grid">
            <label class="filter-label" for="components"
              >Components
              <span class="hint"
                >one per line: <code>Product:Component</code> or
                <code>Product</code></span
              ></label
            >
            <label class="filter-label" for="whiteboards"
              >Whiteboard tags <span class="hint">one per line</span></label
            >
            <textarea
              id="components"
              rows="6"
              placeholder="Firefox:General&#10;DevTools"
            ></textarea>
            <textarea
              id="whiteboards"
              rows="6"
              placeholder="[fx-vpn]&#10;[fidefe-sidebar]"
            ></textarea>
            <label class="filter-label filter-label--spaced" for="metabugs"
              >Metabug IDs
              <span class="hint">comma or newline separated</span></label
            >
            <label class="filter-label filter-label--spaced" for="assignees"
              >Assignee emails <span class="hint">one per line</span></label
            >
            <textarea
              id="metabugs"
              rows="3"
              placeholder="1882882, 1993031"
            ></textarea>
            <textarea
              id="assignees"
              rows="3"
              placeholder="dev@example.com&#10;peer@example.com"
            ></textarea>
            <label class="filter-label filter-label--spaced" for="github-repos"
              >GitHub Repos
              <span class="hint"
                >one per line: owner/repo (e.g., mozilla/firefox)</span
              ></label
            >
            <label class="filter-label filter-label--spaced" for="email-mapping"
              >Email Mapping
              <span class="hint"
                >bugzilla@email.com -> github_username</span
              ></label
            >
            <textarea
              id="github-repos"
              rows="3"
              placeholder="mozilla/firefox&#10;mozilla/devtools"
            ></textarea>
            <textarea
              id="email-mapping"
              rows="3"
              placeholder="dev@mozilla.org -> githubuser&#10;peer@mozilla.org -> anotheruser"
            ></textarea>
          </div>

          <div class="row" style="margin-top: 14px">
            <div>
              <label for="days">Days lookback</label>
              <input id="days" type="number" min="1" value="7" />
            </div>
            <div>
              <label for="voice">Voice</label>
              <select id="voice">
                <option value="normal" selected>Normal</option>
                <option value="pirate">Pirate üè¥‚Äç‚ò†Ô∏è</option>
                <option value="snazzy-robot">Snazzy Robot ü§ñ</option>
              </select>
            </div>
            <div>
              <label for="audience">Audience</label>
              <select id="audience">
                <option value="technical" selected>Technical</option>
                <option value="product">Product</option>
                <option value="leadership">Leadership</option>
              </select>
            </div>
            <div>
              <label for="debug">Debug</label>
              <select id="debug">
                <option value="false">No</option>
                <option value="true">Yes</option>
              </select>
            </div>
            <div>
              <label for="cache">Cache (TTL 1d)</label>
              <select id="cache">
                <option value="true" selected>Yes</option>
                <option value="false">No</option>
              </select>
            </div>
            <div>
              <label for="patch-context">Patch Context</label>
              <select id="patch-context">
                <option value="omit" selected>Skip</option>
                <option value="include">Include</option>
              </select>
            </div>
          </div>

          <div class="actions-row">
            <div class="actions">
              <button id="run">Run SnazzyBot</button>
            </div>

            <div class="status">
              <div id="spin" class="pill" style="display: none">
                ‚è≥ Working‚Ä¶
              </div>
              <div id="quick-status" class="pill" style="display: none"></div>
            </div>
          </div>

          <div id="phases"></div>

          <!-- Screen reader announcements for progress updates -->
          <div
            id="progress-announcer"
            class="sr-only"
            role="status"
            aria-live="polite"
            aria-atomic="true"
          ></div>

          <details id="logwrap">
            <summary>Run log</summary>
            <div id="log" class="log" role="log" aria-live="polite"></div>
          </details>
        </section>

        <!-- Right: Result -->
        <section class="card">
          <p class="kicker">Result</p>
          <div class="actions">
            <button
              id="copy"
              class="secondary icon-btn"
              aria-label="Copy .md"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-copy"></use>
              </svg>
              <span aria-hidden="true">.md</span>
            </button>
            <button
              id="dl-md"
              class="secondary icon-btn"
              aria-label="Download .md"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-download"></use>
              </svg>
              <span aria-hidden="true">.md</span>
            </button>
            <button
              id="copy-rendered"
              class="secondary icon-btn"
              aria-label="Copy rendered result"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-copy"></use>
              </svg>
              <span aria-hidden="true">Rendered</span>
            </button>
            <button
              id="dl-html"
              class="secondary icon-btn"
              aria-label="Download .html"
              disabled
            >
              <svg
                aria-hidden="true"
                viewBox="0 0 24 24"
                xmlns="http://www.w3.org/2000/svg"
              >
                <use href="#icon-download"></use>
              </svg>
              <span aria-hidden="true">.html</span>
            </button>
          </div>
          <!-- keep a hidden textual backup for accessibility / copy as markdown -->
          <div id="out" class="out sr-only" aria-live="polite"></div>

          <!-- error messages - role="alert" ensures screen reader announcement -->
          <div
            id="error-alert"
            class="error-alert"
            role="alert"
            aria-live="assertive"
            style="display: none"
          ></div>

          <!-- rendered output -->
          <iframe
            id="resultFrame"
            title="SnazzyBot result"
            style="
              width: 100%;
              height: 320px;
              border: 1px solid rgba(255, 255, 255, 0.12);
              border-radius: 12px;
              background: #0f1633;
            "
          ></iframe>
        </section>
      </div>

      <p class="footer">
        <span class="footer-source">
          <a
            class="source-link"
            href="https://github.com/msujaws/bugzilla-project-status-update"
          >
            <svg aria-hidden="true" focusable="false">
              <use href="#icon-github"></use>
            </svg>
            <span>source</span>
          </a>
        </span>
        ‚ú® created by Jared Wein / :jaws ‚Äî logo contributed by :jhirsch - name
        contributed by :sclements
      </p>
    </div>
    <canvas id="fx-layer" aria-hidden="true"></canvas>
    <script type="module" src="/app.js"></script>
  </body>
</html>
